{% extends 'main_app/layout.html' %}
{% load socialaccount %}
{% load account %}
{% load static %}

{% block title %}Главная страница{% endblock %}

{% block login %}
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">
        <a href="#" class="navbar-brand">
            <img alt="photo" src="{{ user.socialaccount_set.all.0.get_avatar_url }}" height="100px">
        </a>
        <a href="" class="navbar-brand">
            {% if user.socialaccount_set.all.0.extra_data.name %}
                <p>Добро пожаловать, {{ user.socialaccount_set.all.0.extra_data.name }}!</p>
            {% else %}
<!--                отображает ссылку пользователя ВК-->
                <p>Добро пожаловать, {{ user }}!</p>
            {% endif %}
        </a>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <a href="{% url 'account_logout' %}" class="btn btn-outline-light mr-2">Выход</a>
        </div>
    </nav>

    <!-- Create memory button, form -->
    {% include 'main_app/addmemory.html' %}

    {% if posts %}
        {% for post in posts %}
            <div>
                <h3>{{ post.title }}</h3>
                <p>{{ post.description }}</p>

                {% include 'main_app/view_map.html' %}
            </div>
        {% endfor %}
    {% else %}
        <h3>У вас нет ни одного воспоминания</h3>
    {% endif %}

{% endblock %}

{% block logout %}
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">
        <a href="#" class="navbar-brand">
            <p>Places Remember</p>
        </a>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <button class="btn btn-outline-light mr-2"><a href="{% provider_login_url 'google' %}">Войти с помощью Google</a></button>
            <button class="btn btn-outline-light mr-2"><a href="{% provider_login_url 'vk' %}">Войти с помощью VK</a></button>
        </div>
    </nav>
    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aspernatur deleniti mollitia odit officia provident quidem repellendus ut? Accusamus, architecto, autem enim ipsum laborum nam perferendis similique tempora vero vitae voluptatum!</l></p>
{% endblock %}
